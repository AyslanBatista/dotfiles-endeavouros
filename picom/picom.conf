# ============================================================================
# PICOM v12.5 - CONFIGURAÇÃO OTIMIZADA PARA:
# ============================================================================
# CPU: AMD Ryzen 7 5800X3D (8-core, 16-thread)
# GPU: NVIDIA GeForce GTX 1660 SUPER (Turing, 6GB VRAM)
# Driver: nvidia-open-dkms 590.48.01
# Monitor 1 (DP-2): 1920x1080 @ 144Hz (Primary - AOC)
# Monitor 2 (HDMI-0): 1920x1080 @ 60Hz (Secondary - LG)
# OS: EndeavourOS (Arch-based) + i3wm + X11
# ============================================================================
# Data: 06/02/2026
# Versão: 3.0 - PERFEITA (testada e validada)
# ============================================================================


# ============================================================================
# 1. BACKEND CONFIGURATION
# ============================================================================
backend = "glx";
glx-no-stencil = true;
glx-no-rebind-pixmap = true;
glx-copy-from-front = false;
glx-fbo-srgb = true;

# CRÍTICO: use-damage = false previne glitches em dual monitor
use-damage = false;


# ============================================================================
# 2. VSYNC - DESABILITADO (delegado ao ForceCompositionPipeline)
# ============================================================================
vsync = false;


# ============================================================================
# 3. SHADOW - DESABILITADO PARA PERFORMANCE
# ============================================================================
shadow = false;


# ============================================================================
# 4. FADING - OTIMIZADO PARA TRANSIÇÕES RÁPIDAS
# ============================================================================
fading = true;
fade-in-step = 0.06;
fade-out-step = 0.06;
fade-delta = 8;

fade-exclude = [
  "class_g = 'slop'",
  "name = 'Notification'",
  "class_g ?= 'Dunst'",
];


# ============================================================================
# 5. OPACITY
# ============================================================================
active-opacity = 1.0;
inactive-opacity = 1.0;
frame-opacity = 1.0;
inactive-dim = 0.0;

opacity-rule = [
  "85:class_g = 'kitty'",
  "85:class_g = 'Conky'"
];


# ============================================================================
# 6. BLUR - DESABILITADO (causa dos glitches anteriores)
# ============================================================================
blur: {
  method = "none";
}


# ============================================================================
# 7. ROUNDED CORNERS
# ============================================================================
corner-radius = 0;


# ============================================================================
# 8. ADVANCED RENDERING
# ============================================================================
detect-client-opacity = true;
detect-transient = true;
detect-client-leader = true;
unredir-if-possible = true;

unredir-if-possible-exclude = [
  "class_g = 'looking-glass-client'",
];


# ============================================================================
# 9. WINDOW TYPE SETTINGS
# ============================================================================
wintypes: {
  tooltip = {
    fade = true;
    shadow = false;
    opacity = 0.95;
    focus = true;
    full-shadow = false;
  };
  
  popup_menu = {
    opacity = 0.95;
    fade = true;
    shadow = false;
  };
  
  dropdown_menu = {
    opacity = 0.95;
    fade = true;
    shadow = false;
  };
  
  notification = {
    fade = true;
    shadow = false;
    opacity = 0.95;
  };
  
  dock = {
    shadow = false;
    clip-shadow-above = true;
  };
  
  desktop = {
    shadow = false;
    blur-background = false;
  };
  
  dnd = {
    shadow = false;
  };
  
  dialog = {
    fade = true;
    shadow = false;
    opacity = 0.98;
  };
};


# ============================================================================
# 10. FOCUS SETTINGS
# ============================================================================
mark-wmwin-focused = true;
mark-ovredir-focused = true;
use-ewmh-active-win = true;
